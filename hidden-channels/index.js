(function(h,a,e,g,f,E,P,o,A,y,S){"use strict";const{View:M,Text:i,Pressable:L}=a.findByProps("Button","Text","View"),C=a.findByProps("extractTimestamp"),s=e.stylesheet.createThemedStyleSheet({container:{flex:1,padding:16,alignItems:"center",justifyContent:"center"},title:{fontFamily:e.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:24,textAlign:"left",color:g.semanticColors.HEADER_PRIMARY,paddingVertical:25},text:{flex:1,flexDirection:"row",fontSize:16,textAlign:"justify",color:g.semanticColors.HEADER_PRIMARY},dateContainer:{height:16,alignSelf:"baseline"},bold:{fontFamily:e.constants.Fonts.PRIMARY_SEMIBOLD},highlight:{backgroundColor:g.semanticColors.BACKGROUND_MESSAGE_HIGHLIGHT_HOVER}});function R(t){let{date:n}=t;return e.React.createElement(i,{onPress:function(){E.showToast(e.moment(n).toLocaleString(),f.getAssetIDByName("ic_clock"))},onLongPress:function(){e.clipboard.setString(n.getTime().toString()),E.showToast("Copied Timestamp to Clipboard",f.getAssetIDByName("ic_message_copy"))},style:[s.highlight]},e.moment(n).fromNow())}function x(t){let{channel:n}=t;return e.React.createElement(e.React.Fragment,null,e.React.createElement(i,{style:[s.text,s.bold]},"Topic:")," ",e.React.createElement(i,null,n.topic||"No topic."),e.React.createElement(i,{style:[s.text,s.bold]},`

`,"Creation date:")," ",e.React.createElement(R,{date:new Date(C.extractTimestamp(n.id))}),e.React.createElement(i,{style:[s.text,s.bold]},`

`,"Last message:")," ",n.lastMessageId?e.React.createElement(R,{date:new Date(C.extractTimestamp(n.lastMessageId))}):e.React.createElement(i,null,"No messages."),e.React.createElement(i,{style:[s.text,s.bold]},`

`,"Last pin:")," ",n.lastPinTimestamp?e.React.createElement(R,{date:new Date(n.lastPinTimestamp)}):e.React.createElement(i,null,"No pins."))}const{FormRow:B,FormSection:N,FormSwitc:F,FormSwitchRow:_}=A.Forms;function b(){return P.useProxy(o.storage),e.React.createElement(e.ReactNative.ScrollView,{style:{flex:1}},e.React.createElement(N,{title:"Options",titleStyleType:"no_border"},e.React.createElement(_,{label:"Show Lock Icon",subLabel:"Show a lock icon to the right of hidden channel names.",leading:e.React.createElement(B.Icon,{source:f.getAssetIDByName("ic_lock")}),onValueChange:function(t){return o.storage.showIcon=t},value:o.storage.showIcon})))}const w=a.findByProps("getChannelPermissions","can"),{ChannelTypes:p}=a.findByProps("ChannelTypes"),{getChannel:I}=a.findByProps("getChannel")||a.findByName("getChannel",!1);a.findByProps("extractTimestamp");const v=[p.DM,p.GROUP_DM,p.GUILD_CATEGORY];function T(t){if(t==null||(typeof t=="string"&&(t=I(t)),!t||v.includes(t.type)))return!1;t.realCheck=!0;let n=!w.can(e.constants.Permissions.VIEW_CHANNEL,t);return delete t.realCheck,n}const u=[];var D={onLoad:function(){if(o.storage.showIcon??=!0,!(a.findByProps("ChannelMessages")||a.findByName("ChannelMessages",!1)))return console.error("Hidden Channels plugin: 'ChannelMessages' module not found."),function(){};u.push(y.after("can",w,function(c,l){let[r,d]=c;return!d?.realCheck&&r===e.constants.Permissions.VIEW_CHANNEL?!0:l}));const t=a.findByProps("transitionToGuild");if(t)for(const c of Object.keys(t))typeof t[c]=="function"&&u.push(y.instead(c,t,function(l,r){if(typeof l[0]=="string"){let d=I(l[0]?.match(/(\d+)$/)[1]);if(d&&T(d))return S.showConfirmationAlert({title:"This channel is hidden.",content:e.React.createElement(x,{channel:d}),confirmText:"View Anyway",cancelText:"Cancel",onConfirm:function(){return r(...l)}}),null}return r(...l)}));else console.warn("[HiddenChannels] transitionToGuild not found.");const n=a.findByName("ChannelInfo",!1);n&&o.storage.showIcon&&u.push(y.after("default",n,function(c,l){let[{channel:r}]=c;return e.React.createElement(e.React.Fragment,{},r&&T(r)?e.React.createElement(e.ReactNative.Image,{source:f.getAssetByName("ic_lock").id,style:{width:20,height:20,marginRight:4}}):null,l)}))},onUnload:function(){for(const t of u)t()},settings:b};return h.default=D,Object.defineProperty(h,"__esModule",{value:!0}),h})({},vendetta.metro,vendetta.metro.common,vendetta.ui,vendetta.ui.assets,vendetta.ui.toasts,vendetta.storage,vendetta.plugin,vendetta.ui.components,vendetta.patcher,vendetta.ui.alerts);
