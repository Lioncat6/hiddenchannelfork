(function(r,i,s,c,g,E){"use strict";const{View:R,Text:d,Pressable:m}=i.findByProps("Button","Text","View"),h=i.findByProps("extractTimestamp"),l=s.stylesheet.createThemedStyleSheet({container:{flex:1,padding:16,alignItems:"center",justifyContent:"center"},title:{fontFamily:s.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:24,textAlign:"left",color:g.semanticColors.HEADER_PRIMARY,paddingVertical:25},text:{flex:1,flexDirection:"row",fontSize:16,textAlign:"justify",color:g.semanticColors.HEADER_PRIMARY},dateContainer:{height:16,alignSelf:"baseline"}});function f(e){let{date:t}=e;return React.createElement(m,{style:l.dateContainer,onPress:function(){s.toasts.open({content:s.moment(t).toLocaleString(),source:E.getAssetByName("clock").id})},onLongPress:function(){s.clipboard.setString(t.getTime().toString()),s.toasts.open({content:"Copied to clipboard"})}},React.createElement(d,{style:l.text},s.moment(t).fromNow()))}function T(e){let{channel:t}=e;return React.createElement(R,{style:l.container},React.createElement(d,{style:l.title},"This channel is hidden."),React.createElement(d,{style:l.text},"Topic: ",t.topic||"No topic.",`

`,"Creation date: ",React.createElement(f,{date:new Date(h.extractTimestamp(t.id))}),`

`,"Last message: ",t.lastMessageId?React.createElement(f,{date:new Date(h.extractTimestamp(t.lastMessageId))}):"No messages.",`

`,"Last pin: ",t.lastPinTimestamp?React.createElement(f,{date:new Date(t.lastPinTimestamp)}):"No pins."))}const C=i.findByProps("getChannelPermissions","can"),M=i.findByProps("transitionToGuild"),x=i.findByProps("stores","fetchMessages"),{ChannelTypes:u}=i.findByProps("ChannelTypes"),{getChannel:B}=i.findByProps("getChannel"),A=[u.DM,u.GROUP_DM,u.GUILD_CATEGORY];function p(e){if(e==null||(typeof e=="string"&&(e=B(e)),!e||A.includes(e.type)))return!1;e.realCheck=!0;let t=!C.can(s.constants.Permissions.VIEW_CHANNEL,e);return delete e.realCheck,t}function D(){const e=[],t=i.findByName("ChannelMessages",!1)||i.findByProps("ChannelMessages");return t?(e.push(c.after("can",C,function(n,a){let[o,y]=n;return!y?.realCheck&&o===s.constants.Permissions.VIEW_CHANNEL?!0:a})),e.push(c.instead("transitionToGuild",M,function(n,a){const[o,y]=n;!p(y)&&typeof a=="function"&&a(n)})),e.push(c.instead("fetchMessages",x,function(n,a){const[o]=n;!p(o)&&typeof a=="function"&&a(n)})),e.push(c.instead("default",t,function(n,a){const o=n[0]?.channel;return!p(o)&&typeof a=="function"?a(...n):s.React.createElement(T,{channel:o})})),function(){for(const n of e)n()}):(console.error("Hidden Channels plugin: 'ChannelMessages' module not found."),function(){})}let P;var I={onLoad:function(){return P=D()},onUnload:function(){return P?.()}};return r.default=I,Object.defineProperty(r,"__esModule",{value:!0}),r})({},vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.ui,vendetta.ui.assets);
