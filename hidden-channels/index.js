(function(h,a,i,y,R,c,E){"use strict";const{View:w,Text:g,Pressable:H}=a.findByProps("Button","Text","View"),m=a.findByProps("extractTimestamp"),r=i.stylesheet.createThemedStyleSheet({container:{flex:1,padding:16,alignItems:"center",justifyContent:"center"},title:{fontFamily:i.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:24,textAlign:"left",color:y.semanticColors.HEADER_PRIMARY,paddingVertical:25},text:{flex:1,flexDirection:"row",fontSize:16,textAlign:"justify",color:y.semanticColors.HEADER_PRIMARY},dateContainer:{height:16,alignSelf:"baseline"}});function C(n){let{date:o}=n;return React.createElement(H,{style:r.dateContainer,onPress:function(){i.toasts.open({content:i.moment(o).toLocaleString(),source:R.getAssetByName("clock").id})},onLongPress:function(){i.clipboard.setString(o.getTime().toString()),i.toasts.open({content:"Copied to clipboard"})}},React.createElement(g,{style:r.text},i.moment(o).fromNow()))}function x(n){let{channel:o}=n;return React.createElement(w,{style:r.container},React.createElement(g,{style:r.title},"This channel is hidden."),React.createElement(g,{style:r.text},"Topic: ",o.topic||"No topic.",`

`,"Creation date: ",React.createElement(C,{date:new Date(m.extractTimestamp(o.id))}),`

`,"Last message: ",o.lastMessageId?React.createElement(C,{date:new Date(m.extractTimestamp(o.lastMessageId))}):"No messages.",`

`,"Last pin: ",o.lastPinTimestamp?React.createElement(C,{date:new Date(o.lastPinTimestamp)}):"No pins."))}const P=a.findByProps("getChannelPermissions","can"),B=a.findByProps("transitionToGuild"),$=a.findByProps("stores","fetchMessages"),{ChannelTypes:p}=a.findByProps("ChannelTypes"),{getChannel:T}=a.findByProps("getChannel")||a.findByName("getChannel",!1),S=[p.DM,p.GROUP_DM,p.GUILD_CATEGORY];function d(n){if(n==null||(typeof n=="string"&&(n=T(n)),!n||S.includes(n.type)))return!1;n.realCheck=!0;let o=!P.can(i.constants.Permissions.VIEW_CHANNEL,n);return delete n.realCheck,o}console.log("Loaded Hidden Channels plugin"),console.log(i.constants.Permissions);const f=[];var A={onLoad:function(){const n=a.findByProps("ChannelMessages")||a.findByName("ChannelMessages",!1);if(!n)return console.error("Hidden Channels plugin: 'ChannelMessages' module not found."),function(){};f.push(c.after("can",P,function(e,t){let[s,l]=e;return!l?.realCheck&&s===i.constants.Permissions.VIEW_CHANNEL?!0:t})),f.push(c.instead("transitionToGuild",B,function(e,t){console.log("[HiddenChannels] Router.transitionToGuild called with args:",e);const[s,l]=e;!d(l)&&typeof t=="function"&&t(e)})),f.push(c.instead("fetchMessages",$,function(e,t){console.log("[HiddenChannels] Fetcher.fetchMessages called with args:",e);const[s]=e;!d(s)&&typeof t=="function"&&t(e)})),f.push(c.instead("default",n,function(e,t){console.log("[HiddenChannels] ChannelMessages.default called with args:",e);const s=e[0]?.channel;return console.log("[HiddenChannels] ChannelMessages.default called with:",s,"isHidden:",d(s)),!d(s)&&typeof t=="function"?t(...e):i.React.createElement(x,{channel:s})}));const o=["ChannelScreen","ChannelView","transitionToGuild","GuildChannel","fetchMessages","Channel","Messages","getChannel","MessagesWrapper","ChannelTypes","ChannelMessages","ChannelPage","ChannelContainer"];for(const e of o){const t=a.findByProps(e);if(t)for(const s of Object.keys(t))typeof t[s]=="function"&&c.instead(s,t,function(l,M){if(typeof l[0]=="function")console.log(`[HiddenChannels] ${e}.${s} called with function argument:`,l[0].name||"<anonymous>");else{console.log(`[HiddenChannels] ${e}.${s} called`,l);let u=T(l[0]?.match(/(\d+)$/)[1]);if(console.log(u),u&&d(u))return console.log(`[HiddenChannels] ${e}.${s} is hidden, returning HiddenChannel component.`),console.log(M.toString()),E.showConfirmationAlert({title:"This channel is hidden",content:`${u.topic_||"No Topic."}

Creation date: ${new Date(u.id).toLocaleString()}`,confirmText:"Close",onConfirm:function(){return new Promise(function(N){setTimeout(N,5e3)})}}),null}return console.log(`mod properties: ${Object.keys(t).join(", ")} function ${t[s].toString()}`),M(...l)});else console.log(`[HiddenChannels] Module ${e} not found.`)}},onUnload:function(){for(const n of f)n()}};return h.default=A,Object.defineProperty(h,"__esModule",{value:!0}),h})({},vendetta.metro,vendetta.metro.common,vendetta.ui,vendetta.ui.assets,vendetta.patcher,vendetta.ui.alerts);
