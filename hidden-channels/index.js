(function(o,t,c,d,h){"use strict";const f=t.findByProps("getChannelPermissions","can"),{ChannelTypes:r}=t.findByProps("ChannelTypes"),{getChannel:u}=t.findByProps("getChannel")||t.findByName("getChannel",!1),p=t.findByProps("extractTimestamp"),C=[r.DM,r.GROUP_DM,r.GUILD_CATEGORY];function g(n){if(n==null||(typeof n=="string"&&(n=u(n)),!n||C.includes(n.type)))return!1;n.realCheck=!0;let s=!f.can(c.constants.Permissions.VIEW_CHANNEL,n);return delete n.realCheck,s}const l=[];var y={onLoad:function(){if(!(t.findByProps("ChannelMessages")||t.findByName("ChannelMessages",!1)))return console.error("Hidden Channels plugin: 'ChannelMessages' module not found."),function(){};l.push(d.after("can",f,function(s,a){let[i,e]=s;return!e?.realCheck&&i===c.constants.Permissions.VIEW_CHANNEL?!0:a}));const n=t.findByProps("transitionToGuild");if(n)for(const s of Object.keys(n))typeof n[s]=="function"&&l.push(d.instead(s,n,function(a,i){if(typeof a[0]=="string"){let e=u(a[0]?.match(/(\d+)$/)[1]);if(e&&g(e))return h.showConfirmationAlert({title:"This channel is hidden.",content:`${e.topic_||"No Topic."}

**Creation date**: ${new Date(p.extractTimestamp(e.id)).toLocaleString()}

**Last Message**: ${e.lastMessageId?new Date(p.extractTimestamp(e.lastMessageId)).toLocaleString():"No messages."}

**Last Pin**: ${e.lastPinTimestamp?new Date(e.lastPinTimestamp).toLocaleString():"No pins."}`,confirmText:"View Anyway",cancelText:"Cancel",onConfirm:function(){return i(...a)}}),null}return i(...a)}));else console.warn("[HiddenChannels] transitionToGuild not found.")},onUnload:function(){for(const n of l)n()}};return o.default=y,Object.defineProperty(o,"__esModule",{value:!0}),o})({},vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.ui.alerts);
