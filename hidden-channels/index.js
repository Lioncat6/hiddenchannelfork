(function(h,a,e,g,d,C,A,o,S,y,x){"use strict";const{View:m,Text:i,Pressable:F}=a.findByProps("Button","Text","View"),T=a.findByProps("extractTimestamp"),s=e.stylesheet.createThemedStyleSheet({container:{flex:1,padding:16,alignItems:"center",justifyContent:"center"},title:{fontFamily:e.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:24,textAlign:"left",color:g.semanticColors.HEADER_PRIMARY,paddingVertical:25},text:{flex:1,flexDirection:"row",fontSize:16,textAlign:"justify",color:g.semanticColors.HEADER_PRIMARY},dateContainer:{height:16,alignSelf:"baseline"},bold:{fontFamily:e.constants.Fonts.PRIMARY_SEMIBOLD},highlight:{backgroundColor:g.semanticColors.BACKGROUND_MESSAGE_HIGHLIGHT_HOVER}});function R(t){let{date:n}=t;return e.React.createElement(i,{onPress:function(){C.showToast(e.moment(n).toLocaleString(),d.getAssetIDByName("ic_clock"))},onLongPress:function(){e.clipboard.setString(n.getTime().toString()),C.showToast("Copied Timestamp to Clipboard",d.getAssetIDByName("ic_message_copy"))},style:[s.highlight]},e.moment(n).fromNow())}function B(t){let{channel:n}=t;return e.React.createElement(e.React.Fragment,null,e.React.createElement(i,{style:[s.text,s.bold]},"Topic:")," ",e.React.createElement(i,null,n.topic||"No topic."),e.React.createElement(i,{style:[s.text,s.bold]},`

`,"Creation date:")," ",e.React.createElement(R,{date:new Date(T.extractTimestamp(n.id))}),e.React.createElement(i,{style:[s.text,s.bold]},`

`,"Last message:")," ",n.lastMessageId?e.React.createElement(R,{date:new Date(T.extractTimestamp(n.lastMessageId))}):e.React.createElement(i,null,"No messages."),e.React.createElement(i,{style:[s.text,s.bold]},`

`,"Last pin:")," ",n.lastPinTimestamp?e.React.createElement(R,{date:new Date(n.lastPinTimestamp)}):e.React.createElement(i,null,"No pins."))}const{FormRow:_,FormSection:N,FormSwitc:k,FormSwitchRow:b}=S.Forms;function v(){return A.useProxy(o.storage),e.React.createElement(e.ReactNative.ScrollView,{style:{flex:1}},e.React.createElement(N,{title:"Options",titleStyleType:"no_border"},e.React.createElement(b,{label:"Show Lock Icon",subLabel:"Show a lock icon to the right of hidden channel names.",leading:e.React.createElement(_.Icon,{source:d.getAssetIDByName("ic_lock")}),onValueChange:function(t){return o.storage.showIcon=t},value:o.storage.showIcon})))}const w=a.findByProps("getChannelPermissions","can"),{ChannelTypes:p}=a.findByProps("ChannelTypes"),{getChannel:I}=a.findByProps("getChannel")||a.findByName("getChannel",!1);a.findByProps("extractTimestamp");const D=[p.DM,p.GROUP_DM,p.GUILD_CATEGORY];function P(t){if(t===void 0||(typeof t=="string"&&(t=I(t)),!t||D.includes(t.type)))return!1;t.realCheck=!0;const n=!w.can(e.constants.Permissions.VIEW_CHANNEL,t);return delete t.realCheck,n}const f=[];var M={onLoad:function(){if(o.storage.showIcon??=!0,!(a.findByProps("ChannelMessages")||a.findByName("ChannelMessages",!1)))return console.error("Hidden Channels plugin: 'ChannelMessages' module not found."),function(){};f.push(y.after("can",w,function(c,l){let[r,u]=c;return!u?.realCheck&&r===e.constants.Permissions.VIEW_CHANNEL?!0:l}));const t=a.findByProps("transitionToGuild");if(t)for(const c of Object.keys(t))typeof t[c]=="function"&&f.push(y.instead(c,t,function(l,r){if(typeof l[0]=="string"){const u=l[0].match(/(\d+)$/);if(u?.[1]){const L=u[1],E=I(L);if(E&&P(E))return x.showConfirmationAlert({title:"This channel is hidden.",content:e.React.createElement(B,{channel:E}),confirmText:"View Anyway",cancelText:"Cancel",onConfirm:function(){return r(...l)}}),{}}}return r(...l)}));else console.warn("[HiddenChannels] transitionToGuild not found.");const n=a.findByName("ChannelInfo",!1);n&&o.storage.showIcon&&f.push(y.after("default",n,function(c,l){let[{channel:r}]=c;return e.React.createElement(e.React.Fragment,{},r&&P(r)?e.React.createElement(e.ReactNative.Image,{source:d.getAssetByName("ic_lock").id,style:{width:20,height:20,marginRight:4}}):null,l)}))},onUnload:function(){for(const t of f)t()},settings:v};return h.default=M,Object.defineProperty(h,"__esModule",{value:!0}),h})({},vendetta.metro,vendetta.metro.common,vendetta.ui,vendetta.ui.assets,vendetta.ui.toasts,vendetta.storage,vendetta.plugin,vendetta.ui.components,vendetta.patcher,vendetta.ui.alerts);
