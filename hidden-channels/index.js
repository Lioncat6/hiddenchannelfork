(function(u,a,e,h,p,P,c,S,C,g,x){"use strict";const{View:D,Text:i,Pressable:L}=a.findByProps("Button","Text","View"),E=a.findByProps("extractTimestamp"),s=e.stylesheet.createThemedStyleSheet({container:{flex:1,padding:16,alignItems:"center",justifyContent:"center"},title:{fontFamily:e.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:24,textAlign:"left",color:h.semanticColors.HEADER_PRIMARY,paddingVertical:25},text:{flex:1,flexDirection:"row",fontSize:16,textAlign:"justify",color:h.semanticColors.HEADER_PRIMARY},dateContainer:{height:16,alignSelf:"baseline"},bold:{fontFamily:e.constants.Fonts.PRIMARY_SEMIBOLD},highlight:{backgroundColor:h.semanticColors.BACKGROUND_MESSAGE_HIGHLIGHT_HOVER}});function R(t){let{date:n}=t;return e.React.createElement(i,{onPress:function(){p.showToast(e.moment(n).toLocaleString(),1197)},onLongPress:function(){e.clipboard.setString(n.getTime().toString()),p.showToast("Copied Timestamp to Clipboard",437)},style:[s.highlight]},e.moment(n).fromNow())}function A(t){let{channel:n}=t;return e.React.createElement(e.React.Fragment,null,e.React.createElement(i,{style:[s.text,s.bold]},"Topic:")," ",e.React.createElement(i,null,n.topic||"No topic."),e.React.createElement(i,{style:[s.text,s.bold]},`

`,"Creation date:")," ",e.React.createElement(R,{date:new Date(E.extractTimestamp(n.id))}),e.React.createElement(i,{style:[s.text,s.bold]},`

`,"Last message:")," ",n.lastMessageId?e.React.createElement(R,{date:new Date(E.extractTimestamp(n.lastMessageId))}):e.React.createElement(i,null,"No messages."),e.React.createElement(i,{style:[s.text,s.bold]},`

`,"Last pin:")," ",n.lastPinTimestamp?e.React.createElement(R,{date:new Date(n.lastPinTimestamp)}):e.React.createElement(i,null,"No pins."))}const{FormRow:B,FormSection:b,FormSwitc:F,FormSwitchRow:v}=S.Forms;function M(){return P.useProxy(c.storage),e.React.createElement(e.ReactNative.ScrollView,{style:{flex:1}},e.React.createElement(b,{title:"Options",titleStyleType:"no_border"},e.React.createElement(v,{label:"Show Lock Icon",subLabel:"Show a lock icon to the right of hidden channel names.",leading:e.React.createElement(B.Icon,{source:C.getAssetIDByName("ic_lock")}),onValueChange:function(t){return c.storage.showIcon=t},value:c.storage.showIcon})))}const w=a.findByProps("getChannelPermissions","can"),{ChannelTypes:y}=a.findByProps("ChannelTypes"),{getChannel:I}=a.findByProps("getChannel")||a.findByName("getChannel",!1);a.findByProps("extractTimestamp");const N=[y.DM,y.GROUP_DM,y.GUILD_CATEGORY];function T(t){if(t==null||(typeof t=="string"&&(t=I(t)),!t||N.includes(t.type)))return!1;t.realCheck=!0;let n=!w.can(e.constants.Permissions.VIEW_CHANNEL,t);return delete t.realCheck,n}const f=[];var _={onLoad:function(){if(c.storage.showIcon??=!0,!(a.findByProps("ChannelMessages")||a.findByName("ChannelMessages",!1)))return console.error("Hidden Channels plugin: 'ChannelMessages' module not found."),function(){};f.push(g.after("can",w,function(o,l){let[r,d]=o;return!d?.realCheck&&r===e.constants.Permissions.VIEW_CHANNEL?!0:l}));const t=a.findByProps("transitionToGuild");if(t)for(const o of Object.keys(t))typeof t[o]=="function"&&f.push(g.instead(o,t,function(l,r){if(typeof l[0]=="string"){let d=I(l[0]?.match(/(\d+)$/)[1]);if(d&&T(d))return x.showConfirmationAlert({title:"This channel is hidden.",content:e.React.createElement(A,{channel:d}),confirmText:"View Anyway",cancelText:"Cancel",onConfirm:function(){return r(...l)}}),null}return r(...l)}));else console.warn("[HiddenChannels] transitionToGuild not found.");const n=a.findByName("ChannelInfo",!1);n&&c.storage.showIcon&&f.push(g.after("default",n,function(o,l){let[{channel:r}]=o;return e.React.createElement(e.React.Fragment,{},r&&T(r)?e.React.createElement(e.ReactNative.Image,{source:C.getAssetByID(1740).id,style:{width:20,height:20,marginRight:4}}):null,l)}))},onUnload:function(){for(const t of f)t()},settings:M};return u.default=_,Object.defineProperty(u,"__esModule",{value:!0}),u})({},vendetta.metro,vendetta.metro.common,vendetta.ui,vendetta.ui.toasts,vendetta.storage,vendetta.plugin,vendetta.ui.components,vendetta.ui.assets,vendetta.patcher,vendetta.ui.alerts);
